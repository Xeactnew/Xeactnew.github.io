<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio & Booking</title>
  <meta name="description" content="Responsive portfolio, pricing, availability calendar with time slots, and booking form." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#0b0c0f; --panel:#12141a; --muted:#8a8f98; --text:#e7e9ee; --brand:#4ade80; --line:#1d212a; --ring:rgba(74,222,128,.45); --maxw:1100px; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35); }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0a0b0e,#0d1016);color:var(--text);font-family:Inter,system-ui}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:var(--maxw);margin:auto;padding:18px}
    header.hero{display:grid;gap:16px;align-items:center;grid-template-columns:1fr; padding:22px; background:linear-gradient(180deg,rgba(74,222,128,.08),rgba(74,222,128,0)); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow)}
    .hero h1{margin:0;font-size:clamp(26px,4vw,42px)}
    .hero p{margin:0;color:var(--muted)}
    .cta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    .btn{border:1px solid var(--line); background:var(--panel); color:var(--text); padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer}
    .btn.primary{background:var(--brand); color:#07220f; border-color:transparent}
    section{margin:26px 0}
    .card{background:var(--panel); border:1px solid var(--line); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow)}
    .grid{display:grid; gap:14px}
    @media(min-width:800px){header.hero{grid-template-columns:1.2fr .8fr}.grid.cols-2{grid-template-columns:1fr 1fr}.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    .gallery{display:grid; grid-template-columns:repeat(2,1fr); gap:8px}
    @media(min-width:620px){.gallery{grid-template-columns:repeat(3,1fr)}}
    .gallery a{position:relative; display:block; border-radius:12px; overflow:hidden; border:1px solid var(--line)}
    .gallery img,.gallery video,.gallery iframe{width:100%; height:180px; object-fit:cover; display:block; background:#0b0b0b}
    .pricing{display:grid; gap:12px}
    @media(min-width:720px){.pricing{grid-template-columns:repeat(3,1fr)}}
    .price-card{padding:16px; border:1px solid var(--line); border-radius:16px; background:linear-gradient(180deg,#12141a,#0f1117)}
    .price-card h3{margin:0 0 6px 0}
    .price{font-size:20px; font-weight:700}
    .muted{color:var(--muted)}
    .calendar{--cell:42px; display:grid; gap:10px}
    .cal-header{display:flex; justify-content:space-between; align-items:center}
    .cal-nav{display:flex; gap:8px}
    .cal-grid{display:grid; grid-template-columns:repeat(7,1fr); gap:6px}
    .dow{font-size:12px; color:var(--muted); text-align:center}
    .day{height:var(--cell); display:flex; align-items:center; justify-content:center; border-radius:10px; border:1px solid var(--line); background:#0f1218; cursor:pointer; user-select:none}
    .day.muted{opacity:.35}
    .day.unavailable{background:#1a1e27; color:#777; text-decoration:line-through; cursor:not-allowed}
    .day.selected{outline:2px solid var(--ring); background:#0f1812}
    form label{display:block; font-weight:600; margin:12px 0 6px}
    input,textarea,select{width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--line); background:#0f1117; color:var(--text)}
    .inline{display:flex; gap:10px; flex-wrap:wrap}
    footer{color:var(--muted);font-size:14px; text-align:center; padding:20px}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <div>
        <h1>Work. Pricing. Availability. Bookings.</h1>
        <p>Portfolio with editable availability calendar and time slots. Mobile and desktop ready.</p>
        <div class="cta-row">
          <a class="btn primary" href="#book">Book now</a>
          <a class="btn" href="#pricing">View pricing</a>
          <a class="btn" href="mailto:bhatiiraza06@gmail.com">Email</a>
          <a class="btn" target="_blank" href="https://www.instagram.com/xe6ct_new/">Instagram</a>
        </div>
      </div>
    </header>

    <section id="work" class="card">
      <h2>Recent Work</h2>
      <div class="gallery" id="gallery"></div>
      <details style="margin-top:8px"><summary class="muted">How to connect a Google Drive folder</summary>
        <ol class="muted">
          <li>Create a folder in Google Drive. Put photos/videos inside.</li>
          <li>Right‑click folder → <strong>Share</strong> → set to <strong>Anyone with the link</strong>.</li>
          <li>Copy the folder URL. The ID is the long string after <code>/folders/</code>.</li>
          <li>Create a Google Cloud Project → enable <strong>Google Drive API</strong> → create an <strong>API key</strong>. Restrict it by HTTP referrer to your site.</li>
          <li>Paste your <code>DRIVE_FOLDER_ID</code> and <code>GOOGLE_API_KEY</code> into the script config below and deploy.</li>
        </ol>
      </details>
      <p class="muted">This page will list images and videos from that folder automatically. Repo <code>media/</code> remains as fallback.</p>
    </section>

    <section id="pricing" class="card">
      <h2>Pricing</h2>
      <div class="pricing">
        <div class="price-card"><h3>Photoshoot only</h3><div class="price">£120 – £180</div><p class="muted">15–20 edited images</p></div>
        <div class="price-card"><h3>Short video – Speedramp</h3><div class="price">£100 – £150</div><p class="muted">20–40 sec</p></div>
        <div class="price-card"><h3>Short cinematic video</h3><div class="price">£150 – £220</div><p class="muted">45–90 sec</p></div>
        <div class="price-card"><h3>Extended cinematic video</h3><div class="price">£250 – £400</div><p class="muted">3–5 min</p></div>
        <div class="price-card"><h3>Photo + short video combo</h3><div class="price">£250 – £350</div></div>
      </div>
      <h3 style="margin-top:20px">Bundles</h3>
      <ul>
        <li><strong>Basic (£200 – £250)</strong>: 10 edited photos, 1× 60 sec cinematic reel, local travel (20 miles)</li>
        <li><strong>Standard (£350 – £450)</strong>: 20–25 photos, 1× 2–3 min cinematic video, BTS content, travel up to 40 miles</li>
        <li><strong>Premium (£600 – £800)</strong>: 30+ photos, 2 videos (short reel + extended), rolling shots, multiple locations, travel up to 80 miles</li>
      </ul>
      <h3>Add-ons</h3>
      <ul>
        <li>Extra photos — £10 – £15 each</li>
        <li>Raw photo/video delivery — £50 – £100</li>
        <li>Extra location (same day) — £50 – £100</li>
        <li>Long-distance travel (100+ miles) — 45p – 60p per mile or £200/day</li>
      </ul>
    </section>

    <section id="book" class="card">
      <h2>Check Availability & Book</h2>
      <div class="calendar" id="calendar"></div>

      <form id="bookingForm" method="POST" action="https://formspree.io/f/xvgbkapr?via=site">
        <div class="inline">
          <div style="flex:1">
            <label for="date">Selected date</label>
            <input id="date" name="date" type="text" placeholder="DD/MM/YYYY" required readonly>
          </div>
          <div style="width:180px">
            <label for="time">Time slot</label>
            <select id="time" name="time" required>
              <option value="">Select...</option>
              <option>09:00 – 11:00</option>
              <option>12:00 – 14:00</option>
              <option>15:00 – 17:00</option>
              <option>18:00 – 20:00</option>
            </select>
          </div>
          <div style="width:200px">
            <label for="package">Package</label>
            <select id="package" name="package">
              <option>Photoshoot only</option>
              <option>Short video – Speedramp</option>
              <option>Short cinematic video</option>
              <option>Extended cinematic video</option>
              <option>Photo + short video combo</option>
              <option>Basic bundle</option>
              <option>Standard bundle</option>
              <option>Premium bundle</option>
              <option>Add-ons</option>
            </select>
          </div>
        </div>
        <label for="name">Your name</label>
        <input id="name" name="name" type="text" required>
        <label for="email">Email</label>
        <input id="email" name="email" type="email" required>
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes" rows="4" placeholder="Location, times, details"></textarea>
        <div class="inline" style="margin-top:10px">
          <button class="btn primary" type="submit">Request booking</button>
        </div>
      </form>
    </section>

    <footer>
      <div>&copy; <span id="year"></span> Portfolio & Booking</div>
    </footer>
  </div>

  <script>
    // ---------- CONFIG ----------
    // Optional: pull from a Google Drive folder. Set both values.
    const DRIVE_FOLDER_ID = '';
    const GOOGLE_API_KEY = '';

    // Fallback: still load from this repo's /media folder.

    // ---------- Helpers ----------
    function detectRepo(){
      const host = window.location.hostname; // e.g. username.github.io
      const owner = host.split('.')[0];
      const segs = window.location.pathname.replace(/\/+$/,'').split('/').filter(Boolean);
      const repo = segs.length > 0 ? segs[0] : `${owner}.github.io`;
      return { owner, repo };
    }

    function drivePreviewUrl(id){ return `https://drive.google.com/file/d/${id}/preview`; }
    function driveDownloadUrl(id){ return `https://drive.google.com/uc?export=download&id=${id}`; }

    // ---------- Drive Loader ----------
    async function listDriveFolderFiles(folderId, apiKey){
      const base = 'https://www.googleapis.com/drive/v3/files';
      const q = encodeURIComponent(`'${folderId}' in parents and (mimeType contains 'image/' or mimeType contains 'video/') and trashed=false`);
      const fields = encodeURIComponent('nextPageToken,files(id,name,mimeType)');
      let pageToken = '';
      const out = [];
      for(let i=0;i<5;i++){ // up to ~500 files
        const url = `${base}?q=${q}&fields=${fields}&orderBy=modifiedTime desc&pageSize=100${pageToken?`&pageToken=${pageToken}`:''}&key=${apiKey}`;
        const res = await fetch(url);
        if(!res.ok) throw new Error('Drive API error '+res.status);
        const data = await res.json();
        out.push(...(data.files||[]));
        if(!data.nextPageToken) break; else pageToken = data.nextPageToken;
      }
      return out;
    }

    async function renderDriveGallery(){
      const gallery = document.getElementById('gallery');
      if(!DRIVE_FOLDER_ID || !GOOGLE_API_KEY) return false;
      try{
        gallery.innerHTML = '<p class="muted">Loading Google Drive folder…</p>';
        const files = await listDriveFolderFiles(DRIVE_FOLDER_ID, GOOGLE_API_KEY);
        if(!files.length){ gallery.innerHTML = '<p class="muted">Drive folder is empty or not shared publicly.</p>'; return true; }
        gallery.innerHTML = '';
        files.forEach(f=>{
          const isImage = f.mimeType && f.mimeType.startsWith('image/');
          const isVideo = f.mimeType && f.mimeType.startsWith('video/');
          const a = document.createElement('a');
          a.href = isVideo ? drivePreviewUrl(f.id) : driveDownloadUrl(f.id);
          a.target = '_blank'; a.rel='noopener';
          if(isImage){
            const img = document.createElement('img');
            img.src = driveDownloadUrl(f.id);
            img.alt = f.name;
            a.appendChild(img);
          } else if(isVideo){
            const iframe = document.createElement('iframe');
            iframe.src = drivePreviewUrl(f.id);
            iframe.allow = 'autoplay; encrypted-media';
            iframe.loading = 'lazy';
            iframe.referrerPolicy = 'no-referrer';
            a.appendChild(iframe);
          }
          gallery.appendChild(a);
        });
        return true;
      }catch(e){
        document.getElementById('gallery').innerHTML = '<p class="muted">Could not load Google Drive. Check API key, folder sharing, or referrer restrictions.</p>';
        return true; // handled
      }
    }

    // ---------- Repo /media fallback ----------
    async function renderRepoGallery(){
      const { owner, repo } = detectRepo();
      const gallery = document.getElementById('gallery');
      try{
        const url = `https://api.github.com/repos/${owner}/${repo}/contents/media`;
        const res = await fetch(url, {headers:{'Accept':'application/vnd.github+json'}});
        if(!res.ok) return false;
        const data = await res.json();
        const files = Array.isArray(data) ? data.filter(x=>x.type==='file') : [];
        const imgExt = ['.jpg','.jpeg','.png','.webp','.gif','.avif'];
        const vidExt = ['.mp4','.webm','.ogg','.mov'];
        const items = files.filter(f=>{
          const name = f.name.toLowerCase();
          return imgExt.some(e=>name.endsWith(e)) || vidExt.some(e=>name.endsWith(e));
        });
        if(items.length===0) return false;
        gallery.innerHTML='';
        items.forEach(it=>{
          const name = it.name.toLowerCase();
          const a = document.createElement('a');
          a.href = it.download_url; a.target = '_blank'; a.rel='noopener';
          if(/\.(jpg|jpeg|png|webp|gif|avif)$/.test(name)){
            const img = document.createElement('img'); img.src = it.download_url; img.alt = it.name; a.appendChild(img);
          } else {
            const v = document.createElement('video'); v.src = it.download_url; v.controls = true; v.playsInline = true; v.muted = true; a.appendChild(v);
          }
          gallery.appendChild(a);
        });
        return true;
      }catch(e){ return false; }
    }

    // ---------- Init ----------
    document.getElementById('year').textContent = new Date().getFullYear();
    (async ()=>{
      const usedDrive = await renderDriveGallery();
      if(!usedDrive){
        const ok = await renderRepoGallery();
        if(!ok){
          document.getElementById('gallery').innerHTML = '<p class="muted">Add media to Google Drive (configure in script) or to <code>media/</code> in this repo.</p>';
        }
      }
    })();
  </script>
</body>
</html>
